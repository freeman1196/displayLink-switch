<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=5'>
    <meta name="format-detection" content="telephone=no">
    <meta name="theme-color" content="#4285f4">
    <link rel="shortcut icon" href="img/fav-icon.svg" type="image/x-icon">
    <title>Test</title>

    <link href="css/style.css" type="text/css" rel="stylesheet">
    <link href="css/media.css" type="text/css" rel="stylesheet">
</head>

<body>
    <main>
        <section class="section-sign-up">
            <div class="flex-item">
                <div class="service-form">
                    <h1>Запись на сервис</h1>
                    <form action="">
                        <input type="text" placeholder="ФИО" class="input-form">
                        <input type="text" id="phone" placeholder="+998" class="input-form">
                        <select id="selectbox1">
                            <option value="">Выберите город</option>
                            <option value="1">Ташкент</option>
                            <option value="2">Самарканд</option>
                            <option value="3">Нукус</option>
                            <option value="4">Наманган</option>
                        </select>
                        <select id="selectbox2">
                            <option value="">Выберите филиал</option>
                            <option value="1">Ташкент</option>
                            <option value="2">Самарканд</option>
                            <option value="3">Нукус</option>
                            <option value="4">Наманган</option>
                        </select>
                        <select id="selectbox3">
                            <option value="">Выберите автомобиль</option>
                            <option value="1">Ташкент</option>
                            <option value="2">Самарканд</option>
                            <option value="3">Нукус</option>
                            <option value="4">Наманган</option>
                        </select>
                        <select id="selectbox4">
                            <option value="">Выберите тип работы</option>
                            <option value="1">Ташкент</option>
                            <option value="2">Самарканд</option>
                            <option value="3">Нукус</option>
                            <option value="4">Наманган</option>
                        </select>
                        <select id="selectbox5">
                            <option value="">Выберите год производства</option>
                            <option value="1">Ташкент</option>
                            <option value="2">Самарканд</option>
                            <option value="3">Нукус</option>
                            <option value="4">Наманган</option>
                        </select>
                        <div class="flex-input">
                            <div class="calendar-box">
                                <input type="text" id="dateInput" class="input-form" placeholder="Дата">
                                <div class="calendar" id="calendar">
                                <div class="header">
                                    <button id="prevBtn">&lt;</button>
                                    <h2 id="monthYear">Month Year</h2>
                                    <button id="nextBtn">&gt;</button>
                                </div>
                                <div class="days" id="daysContainer"></div>
                                </div>
                            </div>
                            <div class="time">
                                <input name="time" type="time" class="input-form" placeholder="HH:MM" value="09:00"/>
                            </div>
                        </div>    
                        <input type="submit" value="Оставить заявку" class="submit-input">
                    </form>
                </div>
                <div class="img-bg">
                    <img src="img/bg-img.jpg" alt="">
                </div>
            </div>
        </section>
    </main>
    <script>
        const phoneInput = document.getElementById('phone');
    
        function mask(event) {
            event.keyCode && (keyCode = event.keyCode);
            let pos = phoneInput.selectionStart;
            if (pos < 3) event.preventDefault()
            let matrix = "+998 (__) ___-__-__",
                i = 0,
                def = matrix.replace(/\D/g, ""),
                val = phoneInput.value.replace(/\D/g, ""),
                newValue = matrix.replace(/[_\d]/g, function (a) {
                    return i < val.length ? val.charAt(i++) || def.charAt(i) : a;
                });
            i = newValue.indexOf("_");
            if (i != -1) {
                i < 5 && (i = 3);
                newValue = newValue.slice(0, i);
            }
            let reg = matrix.substr(0, phoneInput.value.length).replace(/_+/g,
                function (a) {
                    return "\\d{1," + a.length + "}";
                }).replace(/[+()]/g, "\\$&");
            reg = new RegExp("^" + reg + "$");
            if (!reg.test(phoneInput.value) || phoneInput.value.length < 5 || keyCode > 47 && keyCode < 58) phoneInput.value = newValue;
            if (event.type == "blur" && phoneInput.value.length < 5) phoneInput.value = "";
        }
    
        phoneInput.addEventListener("input", mask, false);
        phoneInput.addEventListener("focus", mask, false);
        phoneInput.addEventListener("blur", mask, false);
        phoneInput.addEventListener("keydown", mask, false);
        phoneInput.addEventListener('mouseup', event => {
            event.preventDefault()
            if (phoneInput.value.length < 4) {
                phoneInput.setSelectionRange(4, 4)
            } else {
                phoneInput.setSelectionRange(phoneInput.value.length, phoneInput.value.length)
            }
        });
    </script>
    <script src="js/jQuery v3.6.0.js"></script>
    <script type="text/javascript" src="js/script.js"></script>
</body>
</html>

